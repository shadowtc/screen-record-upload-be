version: '3.8'

services:
  app:
    build: .
    ports:
      - "8080:8080"
    environment:
      - S3_ENDPOINT=${S3_ENDPOINT:-http://192.168.0.245:9000}
      - S3_ACCESS_KEY=${S3_ACCESS_KEY:-minioadmin}
      - S3_SECRET_KEY=${S3_SECRET_KEY:-minioadmin123}
      - S3_BUCKET=${S3_BUCKET:-remote-consent}
      - S3_REGION=${S3_REGION:-us-east-1}
      - S3_PATH_STYLE=${S3_PATH_STYLE:-true}
      - UPLOAD_MAX_SIZE=${UPLOAD_MAX_SIZE:-2147483648}
      - UPLOAD_CHUNK_SIZE=${UPLOAD_CHUNK_SIZE:-8388608}
      - PRESIGNED_URL_EXPIRATION=${PRESIGNED_URL_EXPIRATION:-60}
    networks:
      - minio-network
    restart: unless-stopped

networks:
  minio-network:
    driver: bridge
